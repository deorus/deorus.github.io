
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Alex Rodrigues</title>
  <meta name="author" content="Alex Rodrigues">

  
  <meta name="description" content="I wonder how ancient civilizations, that have built incredible structures, knew that once built they would remain steady. I&rsquo;m not talking about &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://deorus.github.io">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Alex Rodrigues" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-18911417-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Alex Rodrigues</a></h1>
  
    <h2>Data science, distributed systems and big data</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:deorus.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/02/28/probe-your-system-with-synthesized-realistic-data/">Probe Your System With Synthesized Realistic Data</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-02-28T07:05:00+00:00" pubdate data-updated="true">Feb 28<span>th</span>, 2015</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I wonder how ancient civilizations, that have built incredible structures, knew that once built they would remain steady. I&rsquo;m not talking about mysterious pyramids but more recent landmarks left us by romans such as roman aqueducts. How sure were they on the resiliency to nature powers, strong winds and tough winters? Well&hellip; the answer seems to be easy: with lots of theoretic work, designs and calculations.</p>

<p>While this is true, things were also achieved with lots of experimentation, both on the structural side and on materials applications. That knowledge was vital to have good practices on what to use in each situation and predict maintenance and consequences in extreme conditions. The same applies to the conception of fault-tolerant reliable systems to process large volumes of data.</p>

<p>Normal approaches start with mere reasonable assumptions on data volume, ingestion rate, document size, but others are hard to predict such as processing time, indexing time, etc. It really helps to know how components behave under pressure and calculate what are the limits of the current design.</p>

<p>Many (self-entitled) architects like to take the designing process as cooking a big blend of hype-based technologies and it&rsquo;s very easy to get burnt. Key factors such as SLAs, peak times and hardware limitations greatly affect which components you choose to put in the pan and how would you mix them together.</p>

<p>The only way to know how certain software components behave, they have to be exercised with a great volume of data, similar to the one they will process once in production. Data that can be just fed from the productions servers if it exists and if the infrastructure allows. More often than not, the data is not yet available in the target formats and there&rsquo;s the necessity of trying out with generated data in the chosen formats.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2015/02/28/probe-your-system-with-synthesized-realistic-data/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/02/12/computing-approximate-histograms-in-parallel/">Computing Approximate Histograms in Parallel</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-02-12T18:03:00+00:00" pubdate data-updated="true">Feb 12<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Today I&rsquo;m going to write a little about Approximate Histograms and how can they be used to get more insight on streamed big data feeds. I also provide a simple Java implementation and explain some parts of it.</p>

<p>Most of the common aggregation operations like counting and summing can be performed in parallel, as long there is a reduce phase where the result on each node can be combined. However, this is not very trivial for calculating histograms, as we need all the data on one dimension so that we can represent it in an histogram.</p>

<p>Having the data being processed by multiple nodes, each node is only able to construct an histogram of the partial data it receives. <a href="http://jmlr.org/papers/volume11/ben-haim10a/ben-haim10a.pdf">Ben-Haim and Tom-Tov</a> presented a solution that uses an heap-based data structure to represent the data and a merge algorithm that allows to merge the data structures computed on different nodes into one that is an approximate histogram of all the dataset.</p>

<p>This technique has been applied by <a href="http://metamarkets.com/2013/histograms/">MetaMarkets</a> with good accuracy for most of what an histogram can tell us about the data distribution: calculating the average and counting the quartiles and total number of data/events.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2014/02/12/computing-approximate-histograms-in-parallel/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/07/04/going-event-driven-with-kafka-in-two-weeks-part-ii/">Going Event-driven With Kafka in Two Weeks - Part II</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-07-04T18:03:00+01:00" pubdate data-updated="true">Jul 4<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In the <a href="/blog/2013/06/28/going-event-driven-with-kafka-in-two-weeks-part-i/">first part</a>, I&rsquo;ve described the motivations and requirements for the transition into a event-driven architecture. In this post, I am going to talk about how to perform distributed counting and how Kafka partitioning is handy for this kind of task.</p>

<h2>Online group-by operations</h2>

<p>As mentioned on <a href="/blog/2013/06/28/going-event-driven-with-kafka-in-two-weeks-part-i/">part one</a>, each consumer will receive messages from a set of partitions in a way that each partition will have only one consumer. The subscriber process can then have a consumer stream per thread and can co-operate with other instances running on other machines by defining each consumer to belong to the same consumer group. There no gain on having the total number of threads in the consumer cluster higher than the number of partitions, as each partition will comunicate at most through one consumer stream.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/07/04/going-event-driven-with-kafka-in-two-weeks-part-ii/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/06/28/going-event-driven-with-kafka-in-two-weeks-part-i/">Going Event-driven With Kafka in Two Weeks - Part I</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-06-28T00:47:00+01:00" pubdate data-updated="true">Jun 28<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>During the last couple weeks I&rsquo;ve been working on a project that involves the transformation of a batch-based data pipeline into an event-driven one.</p>

<p>I am working in real-time advertisement industry and most of the reports generated require processing huge amounts of data. The reports are essentially counting events for traffic estimation or classification. However, counting a thousand events per second, in a distributed environment might not be as trivial as it seems.</p>

<p>The old process ingested hourly logs, captured from some dozens of nodes every hour. Each node uploaded a compressed bulk of log files to AWS S3, and Hadoop jobs triggered every hour had to load them up again into HDFS. The whole time spent in this IO-dependent ETL process was considerably huge and the increasing amount of data was causing a delay of several hours to get reporting metrics ready.</p>

<p>In real-time bidding, the reporting data of some hours ago might become totally useless for the current bidding decisions, as the market and the opportunities in inventory vary a lot, depending on the countries you serve ads and depending also on the time of the day.</p>

<p>The latency and the time-based utility of reporting data motivated the change into an event-driven pipeline.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/06/28/going-event-driven-with-kafka-in-two-weeks-part-i/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    
<section>
	<span>
		<img src="http://www.gravatar.com/avatar/d396104b8612b492d9269fbef0758991?s=200" alt="Gravatar of Alex Rodrigues " title="Gravatar of Alex Rodrigues" />
	</span>
</section>

<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/02/28/probe-your-system-with-synthesized-realistic-data/">Probe Your System With Synthesized Realistic Data</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/02/12/computing-approximate-histograms-in-parallel/">Computing Approximate Histograms in Parallel</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/07/04/going-event-driven-with-kafka-in-two-weeks-part-ii/">Going Event-driven With Kafka in Two Weeks - Part II</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/28/going-event-driven-with-kafka-in-two-weeks-part-i/">Going Event-driven With Kafka in Two Weeks - Part I</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/deorus">@deorus</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'deorus',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Alex Rodrigues -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'alexrodrigues';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
